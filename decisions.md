### Hydrogen Orbital Visualizer – Implementation Decisions ✅

Below is a filled‑in decision sheet matching your answers plus concrete proposals where you asked for mine. Anything still blank is genuinely optional; we can ship the first prototype without it.

| #      | Topic                                | Final choice / rationale                                                                                                                                                                                                                                                            |                    |                                                       |
| ------ | ------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------ | ----------------------------------------------------- |
| **1**  | **Dirac vs. Schrödinger parameters** | Keep the UI keyed only by **(n ,l ,m)**. Internally compute **Dirac radial factors** but **sum over spin states** so κ / m<sub>j</sub> never surfaces. Shapes remain identical to non‑relativistic orbitals; radial density shifts ≲1 % for n≤3, which is acceptable for version 1. |                    |                                                       |
| **2**  | Units                                | **Atomic units** (ℏ = m<sub>e</sub> = e = 4 π ε₀ = 1).                                                                                                                                                                                                                              |                    |                                                       |
| **3**  | Radial cut‑off                       | Sample inside the sphere that encloses **90 % total probability** for each (n,l) set. Radius R<sub>90%</sub> is found by solving ∫<sub>0</sub><sup>R</sup>                                                                                                                          | R<sub>n l</sub>(r) | ² r²dr = 0.9 once per orbital and caching the result. |
| **4**  | Point budget                         | **10 k particles** per orbital.                                                                                                                                                                                                                                                     |                    |                                                       |
| **5**  | CPU budget                           | Target **≤ 2 s** for full sampling (10 k Halton points + PDF rejection) on a mid‑range 2023 phone (Snapdragon 720G).                                                                                                                                                                |                    |                                                       |
| **6**  | Sampling thread                      | **Web Worker** for all heavy math to keep the UI fluid. Transfer positions to the main thread via `Float32Array` in a single postMessage (Transferable) → zero copy.                                                                                                                |                    |                                                       |
| **7**  | Particle material                    | Three.js `PointsMaterial` (size‑attenuated, additive blending). Custom shader deferred to v2.                                                                                                                                                                                       |                    |                                                       |
| **8**  | Colors                               | Balmer‑line palette (hex): **H‑α #ff4455 (white‑tinted red), H‑β #66ffff (cyan), H‑γ #cc66ff (magenta)**. White (#ffffff) is kept as fallback / highlight.                                                                                                                          |                    |                                                       |
| **9**  | Depth cues                           | _Size attenuation_ (`sizeAttenuation: true`), _linear fog_ starting at 40 % of R<sub>90%</sub> and ending at 100 %; optional alpha fade in shader later.                                                                                                                            |                    |                                                       |
| **10** | UI library                           | Plain HTML + CSS + minimal JS; no external GUI toolkit.                                                                                                                                                                                                                             |                    |                                                       |
| **11** | Rotation limits                      | OrbitControls with polar angle clamped to **± 80°**.                                                                                                                                                                                                                                |                    |                                                       |
| **12** | Gestures                             | One‑finger rotate, two‑finger pinch zoom, double‑tap resets view.                                                                                                                                                                                                                   |                    |                                                       |
| **13** | Formula panel                        | Floating **pop‑over** showing LaTeX via **KaTeX**; visibility toggled by a checkbox in a corner overlay.                                                                                                                                                                            |                    |                                                       |
| **14** | Code base                            | **TypeScript + Vite** (fast HMR, simple config). Pure ES‑modules acceptable if you prefer zero build step.                                                                                                                                                                          |                    |                                                       |
| **15** | Math typesetting                     | **KaTeX** (smaller, faster).                                                                                                                                                                                                                                                        |                    |                                                       |
| **16** | Style / lint                         | Default ESLint + Prettier config; no corporate rules assumed.                                                                                                                                                                                                                       |                    |                                                       |
| **17** | Repo                                 | New public **GitHub repo** `hydrogen‑orbitals‑vis`.                                                                                                                                                                                                                                 |                    |                                                       |
| **18** | CI / CD                              | GitHub Actions: `lint → build → deploy‑to‑Pages` on push to `main`.                                                                                                                                                                                                                 |                    |                                                       |
| **19** | License                              | **MIT**.                                                                                                                                                                                                                                                                            |                    |                                                       |
| **20** | Dynamics hook (v2)                   | Add an abstract `OrbitalSampler` interface; the current static sampler implements it. A future `TimeEvolutionSampler` can drop in without refactor.                                                                                                                                 |                    |                                                       |
| **21** | Pre‑computed data (future)           | Loader stub that accepts either `{positions}` from the worker **or** a fetched binary GLB/JSON blob, chosen by a build‑time flag.                                                                                                                                                   |                    |                                                       |
